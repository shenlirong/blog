import{useData as U,useSiteLocale as j,defineClientConfig as R}from"vuepress/client";import{startsWith as F,useLocale as g,useKeys as G,isMacOS as P,isIOS as W,isiPad as Y}from"@vuepress/helper/client";import{ref as h,computed as f,watch as T,onMounted as w,onUnmounted as O,defineComponent as E,h as a,shallowRef as M,defineAsyncComponent as $}from"vue";import{u as x,c as q,l as k,o as b,i as B}from"./index-CSn1g7ic.js";import{c as H,C as Q,S as z}from"./icons-DxmX1gti.js";import"./styles/search-box.css";import{useToggle as J,useSupported as V,watchImmediate as K,useScrollLock as X,useEventListener as Z,onClickOutside as ee,useDebounceFn as ae}from"@vueuse/core";import"./styles/search-modal.css";import"vuepress/shared";let le=null;const N=()=>le??=J(),se=(e,r=!1)=>{const t=h(0),n=f(()=>e.value[t.value]),i=()=>{t.value=t.value>0?t.value-1:e.value.length-1},l=()=>{t.value=t.value<e.value.length-1?t.value+1:0};return T(e,()=>{r||(t.value=0)}),{index:t,item:n,prev:i,next:l}},te=()=>{const e=V(()=>typeof window<"u"&&"userAgent"in window.navigator);return f(()=>e.value&&/\b(?:Android|iPhone)/i.test(navigator.userAgent))},re=/[\u4e00-\u9fff\u3400-\u4dbf\u3040-\u309f\u30a0-\u30ff\uac00-\ud7af]/,oe=(e="")=>e.split(/\s+/).map(r=>{if(r.length>3){const t=r.split("");if(t.every(n=>re.test(n)))return t}return r}).flat(),ne=e=>{const r=h([]);if(__SLIMSEARCH_SUGGESTION__){const{page:t,routeLocale:n}=U(),i=x();w(()=>{const{suggest:l,terminate:c}=q(),y=u=>{const{resultsFilter:v,querySplitter:p,suggestionsFilter:C=o=>o,...S}=i.value;u.length>=3?l(u,n.value,S).then(o=>C(o,u,n.value,t.value)).then(o=>{r.value=o.length?F(o[0],u)&&!o[0].slice(u.length).includes(" ")?o:[u,...o]:[]}).catch(o=>{console.error(o)}):r.value=[]};K([e,n],([u])=>{y(u.join(" "))}),O(()=>{c()})})}return{enabled:__SLIMSEARCH_SUGGESTION__,suggestions:r}},ue='<svg width="15" height="15" aria-label="Enter key" role="img"><g fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="1.2"><path d="M12 3.53088v3c0 1-1 2-2 2H4M7 11.53088l-3-3 3-3"></path></g></svg>',ie='<svg width="15" height="15" aria-label="Arrow down" role="img"><g fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="1.2"><path d="M7.5 3.5v8M10.5 8.5l-3 3-3-3"></path></g></svg>',ce='<svg width="15" height="15" aria-label="Arrow up" role="img"><g fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="1.2"><path d="M7.5 11.5v-8M10.5 6.5l-3-3-3 3"></path></g></svg>',ve='<svg width="15" height="15" aria-label="Escape key" role="img"><g fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="1.2"><path d="M13.6167 8.936c-.1065.3583-.6883.962-1.4875.962-.7993 0-1.653-.9165-1.653-2.1258v-.5678c0-1.2548.7896-2.1016 1.653-2.1016.8634 0 1.3601.4778 1.4875 1.0724M9 6c-.1352-.4735-.7506-.9219-1.46-.8972-.7092.0246-1.344.57-1.344 1.2166s.4198.8812 1.3445.9805C8.465 7.3992 8.968 7.9337 9 8.5c.032.5663-.454 1.398-1.4595 1.398C6.6593 9.898 6 9 5.963 8.4851m-1.4748.5368c-.2635.5941-.8099.876-1.5443.876s-1.7073-.6248-1.7073-2.204v-.4603c0-1.0416.721-2.131 1.7073-2.131.9864 0 1.6425 1.031 1.5443 2.2492h-2.956"></path></g></svg>',_=b.hotKeys[0];var he=E({name:"SearchBox",setup(){const e=g(k),[r,t]=N(),n=h(!1);G(b.hotKeys,()=>{r.value||t()});const i=f(()=>_?[...(n.value?["⌃","⇧","⌥","⌘"]:["Ctrl","Shift","Alt","Win"]).filter((l,c)=>_[["ctrl","shift","alt","meta"][c]]),_.key.toUpperCase()]:null);return w(()=>{const{userAgent:l}=navigator;n.value=P(l)||W(l)||Y(l)}),()=>[a("button",{type:"button",class:"slimsearch-button","aria-label":e.value.search,onClick:()=>{t(!0)}},[a(H),a("div",{class:"slimsearch-placeholder"},e.value.search),i.value?a("div",{class:"slimsearch-key-hints"},i.value.map(l=>a("kbd",{class:"slimsearch-key"},l))):null])]}}),pe=E({name:"SearchKeyHints",setup(){const e=g(k),r=te();return()=>r.value?null:a("div",{class:"slimsearch-hints"},[a("span",{class:"slimsearch-hint"},[a("kbd",{innerHTML:ue}),e.value.select]),a("span",{class:"slimsearch-hint"},[a("kbd",{innerHTML:ce}),a("kbd",{innerHTML:ie}),e.value.navigate]),a("span",{class:"slimsearch-hint"},[a("kbd",{innerHTML:ve}),e.value.exit])])}});const de=$({loader:()=>import("./components/SearchResult.js"),loadingComponent:()=>{const e=g(k);return a(z,{class:"slimsearch-result-wrapper",hint:e.value.loading})}}),me=["ArrowDown","ArrowUp","Escape","Tab","Enter"];var ge=E({name:"SearchModal",setup(){const e=g(k),r=j(),t=x(),[n,i]=N(),l=h(""),c=h([]),{enabled:y,suggestions:u}=ne(c),v=h(!1),{index:p,prev:C,next:S}=se(u),o=M(),A=M(),L=M(),D=X(L.value),d=f(()=>y&&v.value&&u.value.length),I=(s=p.value)=>{l.value=u.value[s],v.value=!1};return Z("keydown",s=>{d.value?s.key==="ArrowUp"?C():s.key==="ArrowDown"?S():s.key==="Tab"?I():(s.key==="Enter"||s.key==="Escape")&&(v.value=!1):s.key==="Escape"&&i(!1)},{passive:!0}),ee(A,()=>{v.value=!1}),K(l,ae(()=>(t.value.querySplitter?.(l.value)??Promise.resolve(oe(l.value))).then(s=>{c.value=s.filter(m=>m.length)}),Math.min(b.searchDelay,b.suggestDelay))),w(()=>{L.value=document.body,T(n,s=>{s&&o.value?.focus()},{flush:"post"})}),O(()=>{D.value=!1}),()=>n.value?a("div",{class:"slimsearch-modal-wrapper"},[a("div",{class:"slimsearch-mask",onClick:()=>{i(!1),l.value=""}}),a("div",{class:"slimsearch-modal"},[a("div",{class:"slimsearch-box"},[a("form",[a("label",{id:"slimsearch-label",for:"slimsearch-input","aria-label":e.value.search},a(H)),a("input",{ref:o,type:"search",class:"slimsearch-input",id:"slimsearch-input",placeholder:e.value.placeholder,spellcheck:"false",autocapitalize:"off",autocomplete:"off",autocorrect:"off",name:`${r.value.title}-search`,value:l.value,"aria-controls":"slimsearch-results",onKeydown:s=>{d.value&&me.includes(s.key)&&s.preventDefault()},onInput:({target:s})=>{l.value=s.value,v.value=!0,p.value=0}}),l.value?a("button",{type:"reset",class:"slimsearch-clear-button",title:e.value.clear,"aria-label":e.value.clear,innerHTML:Q,onClick:()=>{l.value=""}}):null,d.value?a("ul",{class:"slimsearch-suggestions",ref:A},u.value.map((s,m)=>a("li",{class:["slimsearch-suggestion",{active:m===p.value}],onClick:()=>{I(m)}},[a("kbd",{class:"slimsearch-auto-complete",title:`Tab ${e.value.autocomplete}`},"Tab"),s]))):null]),a("button",{type:"button",class:"slimsearch-close-button",onClick:()=>{i(!1),l.value=""}},e.value.cancel)]),a(de,{queries:c.value,isFocusing:!d.value,onClose:()=>{i(!1)},onUpdateQuery:s=>{l.value=s}}),a(pe)])]):null}}),fe=R({enhance({app:e}){B(e),e.component("SearchBox",he)},rootComponents:[ge]});export{fe as default};
//# sourceMappingURL=config.js.map
