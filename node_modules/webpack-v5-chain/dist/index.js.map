{"version":3,"file":"index.js","sources":["../src/utils/createChainable.js","../src/utils/createMap.js","../src/utils/ChainedMap.js","../src/utils/createSet.js","../src/utils/ChainedSet.js","../src/utils/Callable.js","../src/utils/createValue.js","../src/utils/ChainedValueMap.js","../src/utils/Orderable.js","../src/DevServer.js","../src/Plugin.js","../src/Resolve.js","../src/Use.js","../src/Rule.js","../src/Module.js","../src/Optimization.js","../src/Output.js","../src/Performance.js","../src/ResolveLoader.js","../src/Config.js"],"sourcesContent":["export const createChainable = (superClass) =>\n  class Chainable extends superClass {\n    constructor(parent) {\n      super();\n      this.parent = parent;\n    }\n\n    batch(handler) {\n      handler(this);\n\n      return this;\n    }\n\n    end() {\n      return this.parent;\n    }\n  };\n","import merge from \"deepmerge\";\n\nexport const createMap = (superClass) =>\n  class ChainableMap extends superClass {\n    constructor(...args) {\n      super(...args);\n      this.store = new Map();\n    }\n\n    extend(methods) {\n      this.shorthands = methods;\n\n      methods.forEach((method) => {\n        this[method] = (value) => this.set(method, value);\n      });\n\n      return this;\n    }\n\n    clear() {\n      this.store.clear();\n\n      return this;\n    }\n\n    delete(key) {\n      this.store.delete(key);\n\n      return this;\n    }\n\n    order() {\n      const entries = [...this.store].reduce((acc, [key, value]) => {\n        acc[key] = value;\n\n        return acc;\n      }, {});\n      const names = Object.keys(entries);\n      const order = [...names];\n\n      names.forEach((name) => {\n        if (!entries[name]) {\n          return;\n        }\n\n        const { __before, __after } = entries[name];\n\n        if (__before && order.includes(__before)) {\n          order.splice(order.indexOf(name), 1);\n          order.splice(order.indexOf(__before), 0, name);\n        } else if (__after && order.includes(__after)) {\n          order.splice(order.indexOf(name), 1);\n          order.splice(order.indexOf(__after) + 1, 0, name);\n        }\n      });\n\n      return { entries, order };\n    }\n\n    entries() {\n      const { entries, order } = this.order();\n\n      if (order.length) {\n        return entries;\n      }\n\n      return undefined;\n    }\n\n    values() {\n      const { entries, order } = this.order();\n\n      return order.map((name) => entries[name]);\n    }\n\n    get(key) {\n      return this.store.get(key);\n    }\n\n    getOrCompute(key, fn) {\n      if (!this.has(key)) {\n        this.set(key, fn());\n      }\n\n      return this.get(key);\n    }\n\n    has(key) {\n      return this.store.has(key);\n    }\n\n    set(key, value) {\n      this.store.set(key, value);\n\n      return this;\n    }\n\n    merge(obj, omit = []) {\n      Object.keys(obj).forEach((key) => {\n        if (omit.includes(key)) {\n          return;\n        }\n\n        const value = obj[key];\n\n        if (\n          (!Array.isArray(value) && typeof value !== \"object\") ||\n          value === null ||\n          !this.has(key)\n        ) {\n          this.set(key, value);\n        } else {\n          this.set(key, merge(this.get(key), value));\n        }\n      });\n\n      return this;\n    }\n\n    clean(obj) {\n      return Object.keys(obj).reduce((acc, key) => {\n        const value = obj[key];\n\n        if (value === undefined) {\n          return acc;\n        }\n\n        if (Array.isArray(value) && !value.length) {\n          return acc;\n        }\n\n        if (\n          Object.prototype.toString.call(value) === \"[object Object]\" &&\n          !Object.keys(value).length\n        ) {\n          return acc;\n        }\n\n        acc[key] = value;\n\n        return acc;\n      }, {});\n    }\n\n    when(\n      condition,\n      whenTruthy = Function.prototype,\n      whenFalsy = Function.prototype,\n    ) {\n      if (condition) {\n        whenTruthy(this);\n      } else {\n        whenFalsy(this);\n      }\n\n      return this;\n    }\n  };\n","import { createChainable } from \"./createChainable.js\";\nimport { createMap } from \"./createMap.js\";\n\nexport const ChainedMap = createMap(createChainable(Object));\n","export const createSet = (superClass) =>\n  class ChainableSet extends superClass {\n    constructor(...args) {\n      super(...args);\n      this.store = new Set();\n    }\n\n    add(value) {\n      this.store.add(value);\n\n      return this;\n    }\n\n    prepend(value) {\n      this.store = new Set([value, ...this.store]);\n\n      return this;\n    }\n\n    clear() {\n      this.store.clear();\n\n      return this;\n    }\n\n    delete(value) {\n      this.store.delete(value);\n\n      return this;\n    }\n\n    values() {\n      return [...this.store];\n    }\n\n    has(value) {\n      return this.store.has(value);\n    }\n\n    merge(arr) {\n      this.store = new Set([...this.store, ...arr]);\n\n      return this;\n    }\n\n    when(\n      condition,\n      whenTruthy = Function.prototype,\n      whenFalsy = Function.prototype,\n    ) {\n      if (condition) {\n        whenTruthy(this);\n      } else {\n        whenFalsy(this);\n      }\n\n      return this;\n    }\n  };\n","import { createChainable } from \"./createChainable.js\";\nimport { createSet } from \"./createSet.js\";\n\nexport const ChainedSet = createSet(createChainable(Object));\n","export class Callable extends Function {\n  constructor() {\n    super();\n\n    return new Proxy(this, {\n      apply: (target, _thisArg, args) => target.classCall(...args),\n    });\n  }\n\n  classCall() {\n    throw new Error(\"not implemented\");\n  }\n}\n","export const createValue = (superClass) =>\n  class ChainableValue extends superClass {\n    constructor(...args) {\n      super(...args);\n      this.value = undefined;\n      this.useMap = true;\n    }\n\n    set(...args) {\n      this.useMap = true;\n      this.value = undefined;\n\n      return super.set(...args);\n    }\n\n    clear() {\n      this.value = undefined;\n\n      return super.clear();\n    }\n\n    classCall(value) {\n      this.clear();\n      this.useMap = false;\n      this.value = value;\n\n      return this.parent;\n    }\n\n    entries() {\n      if (this.useMap) {\n        return super.entries();\n      }\n\n      return this.value;\n    }\n\n    values() {\n      if (this.useMap) {\n        return super.values();\n      }\n\n      return this.value;\n    }\n  };\n","import { Callable } from \"./Callable.js\";\nimport { createChainable } from \"./createChainable.js\";\nimport { createMap } from \"./createMap.js\";\nimport { createValue } from \"./createValue.js\";\n\nexport const ChainedValueMap = createValue(\n  createMap(createChainable(Callable)),\n);\n","export const createOrderable = (superClass) =>\n  class Orderable extends superClass {\n    before(name) {\n      if (this.__after) {\n        throw new Error(\n          `Unable to set .before(${JSON.stringify(\n            name,\n          )}) with existing value for .after()`,\n        );\n      }\n\n      this.__before = name;\n\n      return this;\n    }\n\n    after(name) {\n      if (this.__before) {\n        throw new Error(\n          `Unable to set .after(${JSON.stringify(\n            name,\n          )}) with existing value for .before()`,\n        );\n      }\n\n      this.__after = name;\n\n      return this;\n    }\n\n    merge(obj, omit = []) {\n      if (obj.before) {\n        this.before(obj.before);\n      }\n\n      if (obj.after) {\n        this.after(obj.after);\n      }\n\n      return super.merge(obj, [...omit, \"before\", \"after\"]);\n    }\n  };\n","import { ChainedMap, ChainedSet } from \"./utils/index.js\";\n\nexport class DevServer extends ChainedMap {\n  constructor(parent) {\n    super(parent);\n\n    this.allowedHosts = new ChainedSet(this);\n\n    this.extend([\n      \"after\",\n      \"before\",\n      \"app\",\n      \"bonjour\",\n      \"client\",\n      \"compress\",\n      \"devMiddleware\",\n      \"headers\",\n      \"historyApiFallback\",\n      \"host\",\n      \"hot\",\n      \"ipc\",\n      \"liveReload\",\n      \"onListening\",\n      \"open\",\n      \"port\",\n      \"proxy\",\n      \"server\",\n      \"setupExitSignals\",\n      \"setupMiddlewares\",\n      \"static\",\n      \"watchFiles\",\n      \"webSocketServer\",\n    ]);\n  }\n\n  toConfig() {\n    return this.clean({\n      allowedHosts: this.allowedHosts.values(),\n      ...(this.entries() || {}),\n    });\n  }\n\n  merge(obj, omit = []) {\n    if (!omit.includes(\"allowedHosts\") && \"allowedHosts\" in obj) {\n      this.allowedHosts.merge(obj.allowedHosts);\n    }\n\n    return super.merge(obj, [\"allowedHosts\"]);\n  }\n}\n","import { ChainedMap, createOrderable } from \"./utils/index.js\";\n\nexport const Plugin = createOrderable(\n  class extends ChainedMap {\n    constructor(parent, name, type = \"plugin\") {\n      super(parent);\n      this.name = name;\n      this.type = type;\n      this.extend([\"init\"]);\n\n      this.init((Plugin, args = []) => {\n        if (typeof Plugin === \"function\") {\n          return new Plugin(...args);\n        }\n\n        return Plugin;\n      });\n    }\n\n    use(plugin, args = []) {\n      return this.set(\"plugin\", plugin).set(\"args\", args);\n    }\n\n    tap(f) {\n      if (!this.has(\"plugin\")) {\n        throw new Error(\n          `Cannot call .tap() on a plugin that has not yet been defined. Call ${this.type}('${this.name}').use(<Plugin>) first.`,\n        );\n      }\n      this.set(\"args\", f(this.get(\"args\") || []));\n\n      return this;\n    }\n\n    set(key, value) {\n      if (key === \"args\" && !Array.isArray(value)) {\n        throw new Error(\"args must be an array of arguments\");\n      }\n\n      return super.set(key, value);\n    }\n\n    merge(obj, omit = []) {\n      if (\"plugin\" in obj) {\n        this.set(\"plugin\", obj.plugin);\n      }\n\n      if (\"args\" in obj) {\n        this.set(\"args\", obj.args);\n      }\n\n      return super.merge(obj, [...omit, \"args\", \"plugin\"]);\n    }\n\n    toConfig() {\n      const init = this.get(\"init\");\n      let plugin = this.get(\"plugin\");\n      const args = this.get(\"args\");\n      let pluginPath = null;\n\n      if (plugin === undefined) {\n        throw new Error(\n          `Invalid ${this.type} configuration: ${this.type}('${this.name}').use(<Plugin>) was not called to specify the plugin`,\n        );\n      }\n\n      // Support using the path to a plugin rather than the plugin itself,\n      // allowing expensive require()s to be skipped in cases where the plugin\n      // or webpack configuration won't end up being used.\n      if (typeof plugin === \"string\") {\n        pluginPath = plugin;\n        // eslint-disable-next-line @typescript-eslint/no-require-imports, no-undef\n        plugin = require(pluginPath);\n      }\n\n      const constructorName = plugin.__expression\n        ? `(${plugin.__expression})`\n        : plugin.name;\n\n      const config = init(plugin, args);\n\n      Object.defineProperties(config, {\n        __pluginName: { value: this.name },\n        __pluginType: { value: this.type },\n        __pluginArgs: { value: args },\n        __pluginConstructorName: { value: constructorName },\n        __pluginPath: { value: pluginPath },\n      });\n\n      return config;\n    }\n  },\n);\n","import { Plugin } from \"./Plugin.js\";\nimport { ChainedMap, ChainedSet } from \"./utils/index.js\";\n\nexport class Resolve extends ChainedMap {\n  constructor(parent) {\n    super(parent);\n    this.alias = new ChainedMap(this);\n    this.aliasFields = new ChainedSet(this);\n    this.byDependency = new ChainedMap(this);\n    this.conditionNames = new ChainedSet(this);\n    this.descriptionFiles = new ChainedSet(this);\n    this.exportsFields = new ChainedSet(this);\n    this.extensionAlias = new ChainedMap(this);\n    this.extensions = new ChainedSet(this);\n    this.fallback = new ChainedMap(this);\n    this.importsFields = new ChainedSet(this);\n    this.mainFields = new ChainedSet(this);\n    this.mainFiles = new ChainedSet(this);\n    this.modules = new ChainedSet(this);\n    this.plugins = new ChainedMap(this);\n    this.restrictions = new ChainedSet(this);\n    this.roots = new ChainedSet(this);\n    this.extend([\n      \"cache\",\n      \"cachePredicate\",\n      \"cacheWithContext\",\n      \"enforceExtension\",\n      \"fullySpecified\",\n      \"preferAbsolute\",\n      \"preferRelative\",\n      \"symlinks\",\n      \"unsafeCache\",\n      \"useSyncFileSystemCalls\",\n    ]);\n  }\n\n  plugin(name) {\n    return this.plugins.getOrCompute(\n      name,\n      () => new Plugin(this, name, \"resolve.plugin\"),\n    );\n  }\n\n  toConfig() {\n    return this.clean(\n      Object.assign(this.entries() || {}, {\n        alias: this.alias.entries(),\n        aliasFields: this.aliasFields.values(),\n        byDependency: this.byDependency.entries(),\n        conditionNames: this.conditionNames.values(),\n        descriptionFiles: this.descriptionFiles.values(),\n        exportsFields: this.exportsFields.values(),\n        extensionAlias: this.extensionAlias.entries(),\n        extensions: this.extensions.values(),\n        fallback: this.fallback.entries(),\n        importsFields: this.importsFields.values(),\n        mainFields: this.mainFields.values(),\n        mainFiles: this.mainFiles.values(),\n        modules: this.modules.values(),\n        plugins: this.plugins.values().map((plugin) => plugin.toConfig()),\n        restrictions: this.restrictions.values(),\n        roots: this.roots.values(),\n      }),\n    );\n  }\n\n  merge(obj, omit = []) {\n    const omissions = [\n      \"alias\",\n      \"aliasFields\",\n      \"byDependency\",\n      \"conditionNames\",\n      \"descriptionFiles\",\n      \"exportsFields\",\n      \"extensionAlias\",\n      \"extensions\",\n      \"importsFields\",\n      \"mainFields\",\n      \"mainFiles\",\n      \"modules\",\n      \"restrictions\",\n      \"roots\",\n    ];\n\n    if (!omit.includes(\"plugin\") && \"plugin\" in obj) {\n      Object.keys(obj.plugin).forEach((name) =>\n        this.plugin(name).merge(obj.plugin[name]),\n      );\n    }\n\n    omissions.forEach((key) => {\n      if (!omit.includes(key) && key in obj) {\n        this[key].merge(obj[key]);\n      }\n    });\n\n    return super.merge(obj, [...omit, ...omissions, \"plugin\"]);\n  }\n}\n","import merge from \"deepmerge\";\n\nimport { ChainedMap, createOrderable } from \"./utils/index.js\";\n\nexport const Use = createOrderable(\n  class extends ChainedMap {\n    constructor(parent, name) {\n      super(parent);\n      this.name = name;\n      this.extend([\"loader\", \"options\"]);\n    }\n\n    tap(f) {\n      this.options(f(this.get(\"options\")));\n\n      return this;\n    }\n\n    merge(obj, omit = []) {\n      if (!omit.includes(\"loader\") && \"loader\" in obj) {\n        this.loader(obj.loader);\n      }\n\n      if (!omit.includes(\"options\") && \"options\" in obj) {\n        this.options(merge(this.store.get(\"options\") || {}, obj.options));\n      }\n\n      return super.merge(obj, [...omit, \"loader\", \"options\"]);\n    }\n\n    toConfig() {\n      const config = this.clean(this.entries() || {});\n\n      Object.defineProperties(config, {\n        __useName: { value: this.name },\n        __ruleNames: { value: this.parent?.names },\n        __ruleTypes: { value: this.parent?.ruleTypes },\n      });\n\n      return config;\n    }\n  },\n);\n","import { Resolve } from \"./Resolve.js\";\nimport { Use } from \"./Use.js\";\nimport { ChainedMap, ChainedSet, createOrderable } from \"./utils/index.js\";\n\nconst toArray = (arr) => (Array.isArray(arr) ? arr : [arr]);\n\nexport const Rule = createOrderable(\n  class extends ChainedMap {\n    constructor(parent, name, ruleType = \"rule\") {\n      super(parent);\n      this.ruleName = name;\n      this.names = [];\n      this.ruleType = ruleType;\n      this.ruleTypes = [];\n\n      // eslint-disable-next-line @typescript-eslint/no-this-alias\n      let rule = this;\n\n      while (rule instanceof Rule) {\n        this.names.unshift(rule.ruleName);\n        this.ruleTypes.unshift(rule.ruleType);\n        rule = rule.parent;\n      }\n\n      this.uses = new ChainedMap(this);\n      this.include = new ChainedSet(this);\n      this.exclude = new ChainedSet(this);\n      this.rules = new ChainedMap(this);\n      this.oneOfs = new ChainedMap(this);\n      this.resolve = new Resolve(this);\n      this.resolve.extend([\"fullySpecified\"]);\n      this.extend([\n        \"assert\",\n        \"compiler\",\n        \"enforce\",\n        \"issuer\",\n        \"issuerLayer\",\n        \"layer\",\n        \"mimetype\",\n        \"parser\",\n        \"generator\",\n        \"resource\",\n        \"resourceQuery\",\n        \"scheme\",\n        \"sideEffects\",\n        \"test\",\n        \"type\",\n        \"width\",\n      ]);\n    }\n\n    use(name) {\n      return this.uses.getOrCompute(name, () => new Use(this, name));\n    }\n\n    rule(name) {\n      return this.rules.getOrCompute(name, () => new Rule(this, name, \"rule\"));\n    }\n\n    oneOf(name) {\n      return this.oneOfs.getOrCompute(\n        name,\n        () => new Rule(this, name, \"oneOf\"),\n      );\n    }\n\n    pre() {\n      return this.enforce(\"pre\");\n    }\n\n    post() {\n      return this.enforce(\"post\");\n    }\n\n    toConfig() {\n      const config = this.clean(\n        Object.assign(this.entries() || {}, {\n          include: this.include.values(),\n          exclude: this.exclude.values(),\n          rules: this.rules.values().map((rule) => rule.toConfig()),\n          oneOf: this.oneOfs.values().map((oneOf) => oneOf.toConfig()),\n          use: this.uses.values().map((use) => use.toConfig()),\n          resolve: this.resolve.toConfig(),\n        }),\n      );\n\n      Object.defineProperties(config, {\n        __ruleNames: { value: this.names },\n        __ruleTypes: { value: this.ruleTypes },\n      });\n\n      return config;\n    }\n\n    merge(obj, omit = []) {\n      if (!omit.includes(\"include\") && \"include\" in obj) {\n        this.include.merge(toArray(obj.include));\n      }\n\n      if (!omit.includes(\"exclude\") && \"exclude\" in obj) {\n        this.exclude.merge(toArray(obj.exclude));\n      }\n\n      if (!omit.includes(\"use\") && \"use\" in obj) {\n        Object.keys(obj.use).forEach((name) =>\n          this.use(name).merge(obj.use[name]),\n        );\n      }\n\n      if (!omit.includes(\"rules\") && \"rules\" in obj) {\n        Object.keys(obj.rules).forEach((name) =>\n          this.rule(name).merge(obj.rules[name]),\n        );\n      }\n\n      if (!omit.includes(\"oneOf\") && \"oneOf\" in obj) {\n        Object.keys(obj.oneOf).forEach((name) =>\n          this.oneOf(name).merge(obj.oneOf[name]),\n        );\n      }\n\n      if (!omit.includes(\"resolve\") && \"resolve\" in obj) {\n        this.resolve.merge(obj.resolve);\n      }\n\n      if (!omit.includes(\"test\") && \"test\" in obj) {\n        this.test(\n          obj.test instanceof RegExp || typeof obj.test === \"function\"\n            ? obj.test\n            : new RegExp(obj.test),\n        );\n      }\n\n      return super.merge(obj, [\n        ...omit,\n        \"include\",\n        \"exclude\",\n        \"use\",\n        \"rules\",\n        \"oneOf\",\n        \"resolve\",\n        \"test\",\n      ]);\n    }\n  },\n);\n","import { Rule } from \"./Rule.js\";\nimport { ChainedMap } from \"./utils/index.js\";\n\nexport class Module extends ChainedMap {\n  constructor(parent) {\n    super(parent);\n    this.rules = new ChainedMap(this);\n    this.defaultRules = new ChainedMap(this);\n    this.generator = new ChainedMap(this);\n    this.parser = new ChainedMap(this);\n    this.extend([\n      \"noParse\",\n      \"unsafeCache\",\n      \"exprContextCritical\",\n      \"exprContextRecursive\",\n      \"exprContextRegExp\",\n      \"unknownContextCritical\",\n      \"unknownContextRecursive\",\n      \"unknownContextRegExp\",\n      \"unknownContextRequest\",\n      \"wrappedContextCritical\",\n      \"wrappedContextRecursive\",\n      \"wrappedContextRegExp\",\n      \"strictExportPresence\",\n    ]);\n  }\n\n  defaultRule(name) {\n    return this.defaultRules.getOrCompute(\n      name,\n      () => new Rule(this, name, \"defaultRule\"),\n    );\n  }\n\n  rule(name) {\n    return this.rules.getOrCompute(name, () => new Rule(this, name, \"rule\"));\n  }\n\n  toConfig() {\n    return this.clean(\n      Object.assign(this.entries() || {}, {\n        defaultRules: this.defaultRules.values().map((r) => r.toConfig()),\n        generator: this.generator.entries(),\n        parser: this.parser.entries(),\n        rules: this.rules.values().map((r) => r.toConfig()),\n      }),\n    );\n  }\n\n  merge(obj, omit = []) {\n    if (!omit.includes(\"rule\") && \"rule\" in obj) {\n      Object.keys(obj.rule).forEach((name) =>\n        this.rule(name).merge(obj.rule[name]),\n      );\n    }\n\n    if (!omit.includes(\"defaultRule\") && \"defaultRule\" in obj) {\n      Object.keys(obj.defaultRule).forEach((name) =>\n        this.defaultRule(name).merge(obj.defaultRule[name]),\n      );\n    }\n\n    return super.merge(obj, [\"rule\", \"defaultRule\"]);\n  }\n}\n","import { Plugin } from \"./Plugin.js\";\nimport { ChainedMap, ChainedValueMap } from \"./utils/index.js\";\n\nexport class Optimization extends ChainedMap {\n  constructor(parent) {\n    super(parent);\n    this.minimizers = new ChainedMap(this);\n    this.splitChunks = new ChainedValueMap(this);\n    this.extend([\n      \"checkWasmTypes\",\n      \"chunkIds\",\n      \"concatenateModules\",\n      \"emitOnErrors\",\n      \"avoidEntryIife\",\n      \"flagIncludedChunks\",\n      \"innerGraph\",\n      \"mangleExports\",\n      \"mangleWasmImports\",\n      \"mergeDuplicateChunks\",\n      \"minimize\",\n      \"moduleIds\",\n      \"nodeEnv\",\n      \"portableRecords\",\n      \"providedExports\",\n      \"realContentHash\",\n      \"removeAvailableModules\",\n      \"removeEmptyChunks\",\n      \"runtimeChunk\",\n      \"sideEffects\",\n      \"usedExports\",\n    ]);\n  }\n\n  minimizer(name) {\n    return this.minimizers.getOrCompute(\n      name,\n      () => new Plugin(this, name, \"optimization.minimizer\"),\n    );\n  }\n\n  toConfig() {\n    return this.clean(\n      Object.assign(this.entries() || {}, {\n        splitChunks: this.splitChunks.entries(),\n        minimizer: this.minimizers.values().map((plugin) => plugin.toConfig()),\n      }),\n    );\n  }\n\n  merge(obj, omit = []) {\n    if (!omit.includes(\"minimizer\") && \"minimizer\" in obj) {\n      Object.keys(obj.minimizer).forEach((name) =>\n        this.minimizer(name).merge(obj.minimizer[name]),\n      );\n    }\n\n    return super.merge(obj, [...omit, \"minimizer\"]);\n  }\n}\n","import { ChainedMap } from \"./utils/index.js\";\n\nexport class Output extends ChainedMap {\n  constructor(parent) {\n    super(parent);\n    this.extend([\n      \"assetModuleFilename\",\n      \"asyncChunks\",\n      \"auxiliaryComment\",\n      \"charset\",\n      \"chunkFilename\",\n      \"chunkFormat\",\n      \"chunkLoadTimeout\",\n      \"chunkLoadingGlobal\",\n      \"chunkLoading\",\n      \"clean\",\n      \"compareBeforeEmit\",\n      \"crossOriginLoading\",\n      \"cssChunkFilename\",\n      \"cssFilename\",\n      \"devtoolFallbackModuleFilenameTemplate\",\n      \"devtoolModuleFilenameTemplate\",\n      \"devtoolNamespace\",\n      \"enabledChunkLoadingTypes\",\n      \"enabledLibraryTypes\",\n      \"enabledWasmLoadingTypes\",\n      \"environment\",\n      \"filename\",\n      \"globalObject\",\n      \"hashDigest\",\n      \"hashDigestLength\",\n      \"hashFunction\",\n      \"hashSalt\",\n      \"hotUpdateChunkFilename\",\n      \"hotUpdateGlobal\",\n      \"hotUpdateMainFilename\",\n      \"iife\",\n      \"ignoreBrowserWarnings\",\n      \"importFunctionName\",\n      \"importMetaName\",\n      \"library\",\n      \"libraryExport\",\n      \"libraryTarget\",\n      \"module\",\n      \"path\",\n      \"pathinfo\",\n      \"publicPath\",\n      \"scriptType\",\n      \"sourceMapFilename\",\n      \"sourcePrefix\",\n      \"strictModuleErrorHandling\",\n      \"strictModuleExceptionHandling\",\n      \"trustedTypes\",\n      \"umdNamedDefine\",\n      \"uniqueName\",\n      \"wasmLoading\",\n      \"webassemblyModuleFilename\",\n      \"workerChunkLoading\",\n      \"workerPublicPath\",\n      \"workerWasmLoading\",\n    ]);\n  }\n}\n","import { ChainedValueMap } from \"./utils/index.js\";\n\nexport class Performance extends ChainedValueMap {\n  constructor(parent) {\n    super(parent);\n    this.extend([\"assetFilter\", \"hints\", \"maxAssetSize\", \"maxEntrypointSize\"]);\n  }\n}\n","import { Resolve } from \"./Resolve.js\";\nimport { ChainedSet } from \"./utils/index.js\";\n\nexport class ResolveLoader extends Resolve {\n  constructor(parent) {\n    super(parent);\n    this.extensions = new ChainedSet(this);\n    this.mainFields = new ChainedSet(this);\n    this.modules = new ChainedSet(this);\n  }\n\n  toConfig() {\n    return this.clean({\n      extensions: this.extensions.values(),\n      mainFields: this.mainFields.values(),\n      modules: this.modules.values(),\n      ...super.toConfig(),\n    });\n  }\n\n  merge(obj, omit = []) {\n    const omissions = [\"extensions\", \"mainFields\", \"modules\"];\n\n    omissions.forEach((key) => {\n      if (!omit.includes(key) && key in obj) {\n        this[key].merge(obj[key]);\n      }\n    });\n\n    return super.merge(obj, [...omit, ...omissions]);\n  }\n}\n","import { stringify } from \"javascript-stringify\";\n\nimport { DevServer } from \"./DevServer.js\";\nimport { Module } from \"./Module.js\";\nimport { Optimization } from \"./Optimization.js\";\nimport { Output } from \"./Output.js\";\nimport { Performance } from \"./Performance.js\";\nimport { Plugin } from \"./Plugin.js\";\nimport { Resolve } from \"./Resolve.js\";\nimport { ResolveLoader } from \"./ResolveLoader.js\";\nimport { ChainedMap, ChainedSet } from \"./utils/index.js\";\n\nexport class Config extends ChainedMap {\n  constructor() {\n    super();\n    // https://webpack.js.org/configuration/entry-context/#entry\n    this.entryPoints = new ChainedMap(this);\n    // https://webpack.js.org/configuration/output/\n    this.output = new Output(this);\n    // https://webpack.js.org/configuration/module/\n    this.module = new Module(this);\n    // https://webpack.js.org/configuration/resolve\n    this.resolve = new Resolve(this);\n    // https://webpack.js.org/configuration/resolve/#resolveloader\n    this.resolveLoader = new ResolveLoader(this);\n    // https://webpack.js.org/configuration/optimization/\n    this.optimization = new Optimization(this);\n    // https://webpack.js.org/configuration/plugins/\n    this.plugins = new ChainedMap(this);\n    // https://webpack.js.org/configuration/dev-server/\n    this.devServer = new DevServer(this);\n    // https://webpack.js.org/configuration/performance/\n    this.performance = new Performance(this);\n    this.extend([\n      // https://webpack.js.org/configuration/entry-context/\n      \"context\",\n      // https://webpack.js.org/configuration/mode/\n      \"mode\",\n      // https://webpack.js.org/configuration/cache/\n      \"cache\",\n      // https://webpack.js.org/configuration/devtool/\n      \"devtool\",\n      // https://webpack.js.org/configuration/target/\n      \"target\",\n      // https://webpack.js.org/configuration/watch/\n      \"watch\",\n      \"watchOptions\",\n      // https://webpack.js.org/configuration/externals/\n      \"externals\",\n      \"externalsType\",\n      \"externalsPresets\",\n      // https://webpack.js.org/configuration/node/\n      \"node\",\n      // https://webpack.js.org/configuration/stats/\n      \"stats\",\n      // https://webpack.js.org/configuration/experiments/\n      \"experiments\",\n      // https://webpack.js.org/configuration/infrastructureLogging/\n      \"infrastructureLogging\",\n      // https://webpack.js.org/configuration/other-options/\n      \"amd\",\n      \"bail\",\n      \"dependencies\",\n      \"ignoreWarnings\",\n      \"loader\",\n      \"name\",\n      \"parallelism\",\n      \"profile\",\n      \"recordsInputPath\",\n      \"recordsOutputPath\",\n      \"recordsPath\",\n      \"snapshot\",\n    ]);\n  }\n\n  static toString(config, { verbose = false, configPrefix = \"config\" } = {}) {\n    return stringify(\n      config,\n      (value, indent, stringify) => {\n        // improve plugin output\n        if (value?.__pluginName) {\n          const prefix = `/* ${configPrefix}.${value.__pluginType}('${value.__pluginName}') */\\n`;\n          const constructorExpression = value.__pluginPath\n            ? // The path is stringified to ensure special characters are escaped\n              // (such as the backslashes in Windows-style paths).\n              `(require(${stringify(value.__pluginPath)}))`\n            : value.__pluginConstructorName;\n\n          if (constructorExpression) {\n            // get correct indentation for args by stringifying the args array and\n            // discarding the square brackets.\n            const args = stringify(value.__pluginArgs).slice(1, -1);\n\n            return `${prefix}new ${constructorExpression}(${args})`;\n          }\n\n          return (\n            prefix +\n            stringify(\n              value.__pluginArgs?.length ? { args: value.__pluginArgs } : {},\n            )\n          );\n        }\n\n        // improve rule/use output\n        if (value?.__ruleNames) {\n          const ruleTypes = value.__ruleTypes;\n          const prefix = `/* ${configPrefix}.module${value.__ruleNames\n            .map(\n              (r, index) => `.${ruleTypes ? ruleTypes[index] : \"rule\"}('${r}')`,\n            )\n            .join(\"\")}${\n            value.__useName ? `.use('${value.__useName}')` : ``\n          } */\\n`;\n\n          return prefix + stringify(value);\n        }\n\n        if (value?.__expression) {\n          return value.__expression;\n        }\n\n        // shorten long functions\n        if (typeof value === \"function\") {\n          if (!verbose && value.toString().length > 100) {\n            return `function () { /* omitted long function */ }`;\n          }\n        }\n\n        return stringify(value);\n      },\n      2,\n    );\n  }\n\n  entry(name) {\n    return this.entryPoints.getOrCompute(name, () => new ChainedSet(this));\n  }\n\n  plugin(name) {\n    return this.plugins.getOrCompute(name, () => new Plugin(this, name));\n  }\n\n  toConfig() {\n    const entryPoints = this.entryPoints.entries() || {};\n    const baseConfig = this.entries() || {};\n\n    return this.clean(\n      Object.assign(baseConfig, {\n        output: this.output.entries(),\n        resolve: this.resolve.toConfig(),\n        resolveLoader: this.resolveLoader.toConfig(),\n        devServer: this.devServer.toConfig(),\n        module: this.module.toConfig(),\n        optimization: this.optimization.toConfig(),\n        plugins: this.plugins.values().map((plugin) => plugin.toConfig()),\n        performance: this.performance.entries(),\n        entry: Object.keys(entryPoints).reduce(\n          (acc, key) =>\n            Object.assign(acc, { [key]: entryPoints[key].values() }),\n          {},\n        ),\n      }),\n    );\n  }\n\n  toString(options) {\n    return Config.toString(this.toConfig(), options);\n  }\n\n  merge(obj = {}, omit = []) {\n    const omissions = [\n      \"output\",\n      \"resolve\",\n      \"resolveLoader\",\n      \"devServer\",\n      \"optimization\",\n      \"performance\",\n      \"module\",\n    ];\n\n    if (!omit.includes(\"entry\") && \"entry\" in obj) {\n      Object.keys(obj.entry).forEach((name) =>\n        this.entry(name).merge([].concat(obj.entry[name])),\n      );\n    }\n\n    if (!omit.includes(\"plugin\") && \"plugin\" in obj) {\n      Object.keys(obj.plugin).forEach((name) =>\n        this.plugin(name).merge(obj.plugin[name]),\n      );\n    }\n\n    omissions.forEach((key) => {\n      if (!omit.includes(key) && key in obj) {\n        this[key].merge(obj[key]);\n      }\n    });\n\n    return super.merge(obj, [...omit, ...omissions, \"entry\", \"plugin\"]);\n  }\n}\n"],"names":["createChainable","superClass","parent","handler","createMap","args","methods","method","value","key","entries","acc","names","order","name","__before","__after","fn","obj","omit","merge","condition","whenTruthy","whenFalsy","ChainedMap","createSet","arr","ChainedSet","Callable","target","_thisArg","createValue","ChainedValueMap","createOrderable","DevServer","Plugin","type","plugin","f","init","pluginPath","constructorName","config","Resolve","omissions","Use","_a","_b","toArray","Rule","ruleType","rule","oneOf","use","Module","r","Optimization","Output","Performance","ResolveLoader","Config","verbose","configPrefix","stringify","indent","prefix","constructorExpression","ruleTypes","index","entryPoints","baseConfig","options"],"mappings":"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"}